<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Add arbitrary attributes to columns (e.g., description, source,
column type). These attributes can later be accessed to fill in the column
attributes table."><title>Add Attributes to Columns — cb_add_col_attributes • codebookr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Attributes to Columns — cb_add_col_attributes"><meta property="og:description" content="Add arbitrary attributes to columns (e.g., description, source,
column type). These attributes can later be accessed to fill in the column
attributes table."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">codebookr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/brad-cannell/codebookr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Add Attributes to Columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/brad-cannell/codebookr/blob/HEAD/R/cb_add_col_attributes.R" class="external-link"><code>R/cb_add_col_attributes.R</code></a></small>
      <div class="d-none name"><code>cb_add_col_attributes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add arbitrary attributes to columns (e.g., description, source,
column type). These attributes can later be accessed to fill in the column
attributes table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cb_add_col_attributes</span><span class="op">(</span><span class="va">df</span>, <span class="va">.x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>Data frame of interest</p></dd>


<dt>.x</dt>
<dd><p>Column of interest in df</p></dd>


<dt>...</dt>
<dd><p>Arbitrary list of attributes (i.e., attribute = "value")</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns the same data frame (or tibble) passed to the <code>df</code> argument
with column attributes added.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Typically, though not necessarily, the first step in creating your
codebook will be to add column attributes to your data. The
<code>cb_add_col_attributes()</code> function is a convenience function that allows
you to add arbitrary attributes to the columns of the data frame. These
attributes can later be accessed to fill in the column attributes table of
the codebook document. Column attributes <em>can</em> serve a similar function to
variable labels in SAS or Stata; however, you can assign many different
attributes to a column and they can contain any kind of information you want.</p>
<p>Although the <code>cb_add_col_attributes()</code> function will allow you to add any
attributes you want, there are currently <strong>only five</strong> special attributes
that the <code><a href="codebook.html">codebook()</a></code> function will recognize and add to the column
attributes table of the codebook document. They are:</p>
<ul><li><p>description:
Although you may add any text you desire to the
<code>description</code> attribute, it is intended to be used describe the
question/process that generated the data contained in the column.
Many statistical software packages refer to this as a variable label.
If the data was imported from SAS, Stata, or SPSS with variable labels
using the <code>haven</code> package, <code>codebook</code> will automatically recognize them.
There is no need to manually create them. However, you may overwrite the
imported variable label for any column by adding a <code>description</code>
attribute.</p></li>
<li><p>source:
Although you may add any text you desire to the <code>source</code>
attribute, it is intended to be used describe where the data contained
in the column originally came from. For example, if the current data
frame was created by merging multiple data sets together, you may want
to use the source attribute to identify the data set it originates from.
As another example, if the current data frame contains longitudinal
data, you may want to use the source attribute to identify the wave(s)
in which data for this column was collected.</p></li>
<li><p>col_type:
The <code>col_type</code> attribute is intended to provide additional
information above and beyond the <code>Data type</code> (i.e., column class) about
the values in the column. For example, you may have a column of 0's
and 1's, which will have a <em>numeric</em> data type. However, you may want
to inform data users that this is really a dummy variable where the
0's and 1's represent discrete categories (No and Yes). Another way to
think about it is that the <code>Data type</code> attribute is how <em>R</em>
understands the column and the <code>Column type</code> attribute is how <em>humans</em>
should understand the column.
Currently accepted values are:
</p><ul><li><p><code>Numeric</code></p></li>
<li><p><code>Categorical</code></p></li>
<li><p><code>Time</code></p></li>
</ul>
Perhaps even more importantly, setting the <code>col_type</code> attribute helps
R determine which descriptive statistics to calculate for the bottom
half of the column attributes table. Inside of the <code><a href="codebook.html">codebook()</a></code>
function, the <code><a href="cb_add_summary_stats.html">cb_add_summary_stats()</a></code> function will attempt to figure
out whether the column is:
<ul><li><p>numeric</p></li>
<li><p>categorical - many categories (e.g. participant id)</p></li>
<li><p>categorical - few categories (e.g. sex)</p></li>
<li><p>time - including dates</p></li>
</ul>
Again, this matters because the table of summary stats shown in the
codebook document depends on the value <code><a href="cb_add_summary_stats.html">cb_add_summary_stats()</a></code>
chooses. However, the user can directly tell <code><a href="cb_add_summary_stats.html">cb_add_summary_stats()</a></code>
which summary stats to calculate by providing a <code>col_type</code> attribute
to a column with one of the following values: <code>Numeric</code>,
<code>Categorical</code>, or <code>Time</code>.</li>
<li><p>value_labels:
Although you may pass any named vector you desire to the <code>value_labels</code>
attribute, it is intended to inform your data users about how to
correctly interpret numerically coded categorical variables. For
example, you may have a column of 0's and 1's that represent discrete
categories (i.e., "No" and "Yes") instead of numerical quantities. In
many other software packages (e.g., SAS, Stata, and SPSS), you can
layer "No" and "Yes" labels on top of the 0's and 1's to improve the
readability of your analysis output. These are commonly referred to
as <em>value labels</em>. The R programming language does not really have
value labels in the same way that other popular statistical software
applications do. R users can (and typically should) coerce numerically
coded categorical variables into factors; however, coercing a numeric
vector to a factor is not the same as adding value labels to a numeric
vector because the underlying numeric values can change in the process
of creating the factor. For this, and other reasons, many R programmers
choose to create a <em>new</em> factor version of a numerically encoded
variable as opposed to overwriting/transforming the numerically encoded
variable. In those cases, you may want to inform your data users about
how to correctly interpret numerically coded categorical variables.
Adding value labels to your codebook is one way of doing so.
</p><ul><li><p>Add value labels to columns as a named vector to the
<code>value_labels</code> attribute. For example, <code>value_labels</code> =
c("No" = 0, "Yes" = 1).</p></li>
<li><p>If the data was imported from SAS, Stata, or SPSS with value labels
using the <code>haven</code> package, <code>codebook</code> will automatically recognize
them. There is no need to manually create them. However, you may
overwrite the imported value labels for any column by adding a
<code>value_labels</code> attribute as shown in the example below.</p></li>
</ul></li>
<li><p>skip_pattern:
Although you may add any text you desire to the <code>skip_pattern</code>
attribute, it is intended to be used describe skip patterns in the
data collection tools that impact which study participants were exposed
to each study item. For example, If a question in your data was only
asked of participants who were enrolled in the study for at least
10 days, then you may want to add a note like "Not asked if
days &lt; 10" to the skip pattern section of
the column attributes table.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/brad-cannell/codebookr" class="external-link">codebookr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">study</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">study</span> <span class="op">&lt;-</span> <span class="va">study</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">cb_add_col_attributes</span><span class="op">(</span></span></span>
<span class="r-in"><span>    .x <span class="op">=</span> <span class="va">likert</span>,</span></span>
<span class="r-in"><span>    description <span class="op">=</span> <span class="st">"An example Likert scale item"</span>,</span></span>
<span class="r-in"><span>    source <span class="op">=</span> <span class="st">"Exposure questionnaire"</span>,</span></span>
<span class="r-in"><span>    col_type <span class="op">=</span> <span class="st">"categorical"</span>,</span></span>
<span class="r-in"><span>    value_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"Very dissatisfied"</span> <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Somewhat dissatisfied"</span> <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Neither satisfied nor dissatisfied"</span> <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Somewhat satisfied"</span> <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>      <span class="st">"Very satisfied"</span> <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    skip_pattern <span class="op">=</span> <span class="st">"Not asked if days &lt; 10"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following attribute(s) are being added to a variable in the data frame for the first time: description, source, col_type, value_labels, skip_pattern. If you believe this/these attribute(s) were previously added, then check for a typo in the attribute name. If you are adding this/these attribute(s) for the first time, you can probably safely ignore this message.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Brad Cannell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

